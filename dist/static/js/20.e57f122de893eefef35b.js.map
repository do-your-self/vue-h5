{"version":3,"sources":["webpack:///src/components/login.vue","webpack:///./src/components/login.vue?f363","webpack:///./src/components/login.vue"],"names":["login","name","created","this","getcaptchaKey","data","form","from","phone","password","smsVerifyCode","captchaKey","captchaUrl","errCount","isCaptcha","flag","methods","time","Date","parse","regExp","reg","val","msg","title","$toast","message","position","duration","test","_this","axios","then","_ref","success","$store","dispatch","type","pwd","token","pwdFlg","$router","push","path","userId","catch","error","console","log","components_login","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","label","placeholder","attr","maxlength","nativeOn","change","$event","model","value","callback","$$v","$set","expression","src","height","width","on","click","_e","size","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/20.e57f122de893eefef35b.js","sourcesContent":["<template>\r\n  <div class=\"bg-con\">\r\n    <h1 class=\"title\">hi,欢迎登录BD_CRM系统~</h1>\r\n    <mt-field label=\"手机号码\" placeholder=\"请输入登录账号\" type=\"tel\" v-model=\"form.phone\" :attr=\"{maxlength: 11}\" @change.native=\"regExp(/^[1][3,4,5,7,8][0-9]{9}$/, form.phone, '请输入正确的手机号码', '手机号码')\"></mt-field>\r\n    <mt-field label=\"密码\" placeholder=\"请输入密码\" type=\"password\" v-model=\"form.password\" @change.native=\"regExp(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,}$/, form.password, '请输入由数字字母组成的不小于8位的密码', '密码')\"></mt-field>\r\n    <mt-field label=\"验证码\" v-model=\"form.smsVerifyCode\" v-if=\"isCaptcha\" @change.native=\"regExp(/^[0-9A-Za-z]{1,}$/, form.smsVerifyCode, '请输入正确的验证码', '验证码')\">\r\n      <img :src=\"captchaUrl\" height=\"30px\" width=\"100px\" @click=\"getcaptchaKey()\" v-if=\"captchaUrl\">\r\n    </mt-field>\r\n    <p class=\"forget\"><span @click=\"$toast({\r\n          message: '请与BD运营中心人员联系',\r\n          position: 'model',\r\n          duration: 3000\r\n        })\">忘记密码？</span></p>\r\n    <!-- <p class=\"forget\"><span @click=\"$router.push({path: '/authentication'})\">忘记密码？</span></p> -->\r\n    <div class=\"btnm\">\r\n      <mt-button size=\"large\" type=\"primary\" @click=\"login\">登录</mt-button>\r\n    </div>\r\n    <p class=\"error\" v-if=\"(errCount >= 3)\">输入错误5次后，账户将被冻结。您已输入错误{{errCount}}次</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"login\",\r\n  created () {\r\n    this.getcaptchaKey()\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        from: \"bdcrm\",\r\n        phone: '',\r\n        password: \"\",\r\n        smsVerifyCode: \"\",\r\n        captchaKey: ''\r\n      },\r\n      captchaUrl: null,\r\n      errCount: null,\r\n      isCaptcha: true,\r\n      flag: true\r\n    };\r\n  },\r\n  methods: {\r\n    getcaptchaKey () {\r\n      var time = Date.parse(new Date())\r\n      this.form.captchaKey = time\r\n      this.captchaUrl = \"https://bdcrm-h5-api.juzifenqi.com/captcha?captchaKey=\" + time\r\n    },\r\n    regExp (reg, val, msg, title) {\r\n      if (val === '') {\r\n        this.$toast({\r\n          message: title+\"不能为空\",\r\n          position: 'model',\r\n          duration: 3000\r\n        })\r\n        this.flag = false\r\n      } else if (!reg.test(val)) {\r\n        this.$toast({\r\n          message: msg,\r\n          position: 'model',\r\n          duration: 3000\r\n        })\r\n        this.flag = false\r\n      } else {\r\n        this.flag = true\r\n      }\r\n    },\r\n    login() {\r\n      this.flag?this.regExp(/^[1][3,4,5,7,8][0-9]{9}$/, this.form.phone, '请输入正确的手机号码', '手机号码'):''\r\n      this.flag?this.regExp(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,}$/, this.form.password, '请输入由数字字母组成的不小于8位的密码', '密码'):''\r\n      this.flag?this.regExp(/^[0-9A-Za-z]{1,}$/, this.form.smsVerifyCode, '请输入正确的验证码', '验证码'):''\r\n      if (this.flag) {\r\n        this.axios.login(this.form).then(({ data }) => {\r\n          if (data.success) {\r\n            this.$store.dispatch({\r\n              type: \"Login\",\r\n              login: {\r\n                pwd: this.form.password,\r\n                token: data.data.token\r\n              }\r\n            });\r\n            // 0 跳转到设置密码页 1 跳转到首页\r\n            data.data.pwdFlg === \"1\"\r\n              ? this.$router.push({ path: \"/home\" })\r\n              : this.$router.push({ path: \"/setPwd/\" + data.data.userId });\r\n          }\r\n          if (!data.success) {\r\n            this.$toast({\r\n              message: data.msg,\r\n              position: \"model\",\r\n              duration: 3000\r\n            });\r\n            // this.isCaptcha = true;\r\n            // this.captchaUrl = \"https://bdcrm-h5-api.juzifenqi.com/captcha?d=\" + Math.random();\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\np.forget {\r\n  margin-right: 10px;\r\n  text-align: right;\r\n  font-size: $font-middle;\r\n  color: $color-primary;\r\n}\r\np.error {\r\n  color: red;\r\n  font-size: $font-middle;\r\n  text-align: center;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg-con\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"hi,欢迎登录BD_CRM系统~\")]),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"手机号码\",\"placeholder\":\"请输入登录账号\",\"type\":\"tel\",\"attr\":{maxlength: 11}},nativeOn:{\"change\":function($event){_vm.regExp(/^[1][3,4,5,7,8][0-9]{9}$/, _vm.form.phone, '请输入正确的手机号码', '手机号码')}},model:{value:(_vm.form.phone),callback:function ($$v) {_vm.$set(_vm.form, \"phone\", $$v)},expression:\"form.phone\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"type\":\"password\"},nativeOn:{\"change\":function($event){_vm.regExp(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,}$/, _vm.form.password, '请输入由数字字母组成的不小于8位的密码', '密码')}},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}}),_vm._v(\" \"),(_vm.isCaptcha)?_c('mt-field',{attrs:{\"label\":\"验证码\"},nativeOn:{\"change\":function($event){_vm.regExp(/^[0-9A-Za-z]{1,}$/, _vm.form.smsVerifyCode, '请输入正确的验证码', '验证码')}},model:{value:(_vm.form.smsVerifyCode),callback:function ($$v) {_vm.$set(_vm.form, \"smsVerifyCode\", $$v)},expression:\"form.smsVerifyCode\"}},[(_vm.captchaUrl)?_c('img',{attrs:{\"src\":_vm.captchaUrl,\"height\":\"30px\",\"width\":\"100px\"},on:{\"click\":function($event){_vm.getcaptchaKey()}}}):_vm._e()]):_vm._e(),_vm._v(\" \"),_c('p',{staticClass:\"forget\"},[_c('span',{on:{\"click\":function($event){_vm.$toast({\n        message: '请与BD运营中心人员联系',\n        position: 'model',\n        duration: 3000\n      })}}},[_vm._v(\"忘记密码？\")])]),_vm._v(\" \"),_c('div',{staticClass:\"btnm\"},[_c('mt-button',{attrs:{\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1),_vm._v(\" \"),((_vm.errCount >= 3))?_c('p',{staticClass:\"error\"},[_vm._v(\"输入错误5次后，账户将被冻结。您已输入错误\"+_vm._s(_vm.errCount)+\"次\")]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-1c961bde\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1c961bde\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"F:\\\\\\\\bdcrm\\\\\\\\vue-h5\\\\\\\\src\\\\\\\\css\\\\\\\\index.scss\\\"]}!../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1c961bde\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1c961bde\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
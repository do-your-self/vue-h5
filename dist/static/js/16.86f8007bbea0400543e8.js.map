{"version":3,"sources":["webpack:///src/components/visitRecord/createVisit.vue","webpack:///./src/components/visitRecord/createVisit.vue?c9ca","webpack:///./src/components/visitRecord/createVisit.vue"],"names":["createVisit","name","props","id","String","data","isDisable","form","busLineId","busLineName","categoryId","categoryName","customId","this","followContent","followDate","followWay","from","shopName","$route","query","token","$store","state","userId","user","userName","methods","regShop","$toast","message","position","duration","getValue","values","type","code","submit","_this","validate","value","required","regExp","errorMsg","isValidate","i","length","test","Date","parse","axios","then","_ref","success","$router","push","msg","catch","error","console","log","visitRecord_createVisit","render","_vm","_h","$createElement","_c","_self","attrs","title","slot","to","path","icon","_v","readonly","disableClear","label","placeholder","model","callback","$$v","$set","expression","disabled","on","select","nativeOn","click","$event","val","onKeypress","attr","maxlength","rows","staticClass","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/16.86f8007bbea0400543e8.js","sourcesContent":["<template>\r\n  <div class=\"\">\r\n    <mt-header title=\"录入拜访\">\r\n      <router-link :to=\"{ path:'/detailNotEnter/'+id }\" slot=\"left\">\r\n        <mt-button icon=\"back\">返回</mt-button>\r\n        <!-- <mt-button icon=\"back\" @click.native=\"$router.go(-1)\">返回</mt-button> -->\r\n      </router-link>\r\n    </mt-header>\r\n    <mt-field :readonly=true :disableClear=true label=\"商户名称\" placeholder=\"请输入拜访商户名称\" v-model=\"form.shopName\"></mt-field>\r\n    <selectList title=\"业务线\" type=\"line\" :disabled=\"isDisable\" v-on:select=\"getValue\" @click.native=\"regShop\"></selectList>\r\n    <selectList title=\"行业\" type=\"category\" :disabled=\"isDisable\" v-on:select=\"getValue\" @click.native=\"regShop\"></selectList>\r\n    <mt-field label=\"联系人\" v-model=\"form.userName\"></mt-field>\r\n    <selectList title=\"跟进方式\" :val=\"form.followWay==2?'拜访':''\" type=\"follow\" v-model=\"form.followWay\"></selectList>\r\n    <selectList title=\"跟进日期\" type=\"date\" v-model=\"form.followDate\"></selectList>\r\n    <mt-field label=\"跟进内容\" onKeypress=\"javascript:if(event.keyCode == 32)event.returnValue = false;\" :attr=\"{maxlength: 100}\" placeholder=\"请录入内容\" type=\"textarea\" rows=\"2\" v-model=\"form.followContent\"></mt-field>\r\n    <div class=\"btnl\">\r\n      <mt-button size=\"large\" type=\"primary\" @click=\"submit\">提交</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: '',\r\n  props: {\r\n    id: String\r\n  },\r\n  data () {\r\n    return {\r\n      isDisable: false,\r\n      form: {\r\n        busLineId: '1',\t\r\n        busLineName: '',\r\n        categoryId: '1',\r\n        categoryName: '',\r\n        customId: this.id,\r\n        followContent: '',\r\n        followDate: '',\r\n        followWay: 2,\r\n        from: 'bdcrm',\r\n        shopName: this.$route.query.shopName,\r\n        token: this.$store.state.token,\r\n        userId: this.$store.state.user.userId,\r\n        userName: this.$store.state.user.userName\r\n      }\r\n    }\r\n  },\r\n  // watch: {\r\n  //   form: {\r\n  //     handler(val, oldVal){\r\n  //       if (!val.shopName) {\r\n  //         return this.isDisable = true\r\n  //       } else {\r\n  //         return this.isDisable = false\r\n  //       }\r\n  //     },\r\n  //     deep:true\r\n  //   }\r\n  // },\r\n  methods: {\r\n    regShop () {\r\n      if (this.isDisable) {\r\n        this.$toast({\r\n          message: '请先输入商户名称',\r\n          position: 'model',\r\n          duration: 3000\r\n        })\r\n      }\r\n    },\r\n    getValue (values, type) {\r\n      switch (type) {\r\n        case 'category':\r\n          this.form.categoryName = values[0].name\r\n          this.form.categoryId = values[0].code\r\n          break;\r\n        case 'line':\r\n          this.form.busLineName = values[0].name\r\n          this.form.busLineId = values[0].code\r\n          break;\r\n      }\r\n    },\r\n    submit () {\r\n      var validate = [{\r\n          value: this.form.shopName,\r\n          required: true, message: '商户名称不能为空'\r\n        }, {\r\n          value: this.form.busLineName,\r\n          required: true, message: '业务线不能为空'\r\n        }, {\r\n          value: this.form.categoryName,\r\n          required: true, message: '行业不能为空'\r\n        }, {\r\n          value: this.form.userName,\r\n          required: true, message: '联系人不能为空'\r\n        }, {\r\n          value: this.form.followWay,\r\n          required: true, message: '跟进方式不能为空'\r\n        }, {\r\n          value: this.form.followDate,\r\n          required: true, message: '跟进日期不能为空'\r\n        }, {\r\n          value: this.form.followContent,\r\n          required: true, message: '跟进内容不能为空', regExp: /^.{2,50}$/, errorMsg: \"跟进内容长度大于等于2，小于等于50\"\r\n        }\r\n      ]\r\n      var isValidate = true\r\n      for(var i =0; i< validate.length; i++) {\r\n        if (!validate[i].value && validate[i].required ) {\r\n          this.$toast({\r\n            message: validate[i].message,\r\n            position: \"model\",\r\n            duration: 3000\r\n          });\r\n          isValidate = false\r\n          break;\r\n        }\r\n        if ((validate[i].regExp && validate[i].required)|| (validate[i].value&& !validate[i].required)) {\r\n          if (!validate[i].regExp.test(validate[i].value)) {\r\n            this.$toast({\r\n              message: validate[i].errorMsg,\r\n              position: \"model\",\r\n              duration: 3000\r\n            });\r\n            isValidate = false\r\n          break;\r\n          }\r\n        }\r\n        if (i==5&&!(Date.parse(validate[i].value) <= Date.parse(new Date()))) {\r\n          this.$toast({\r\n            message: '跟进日期不能大于当前时间',\r\n            position: \"model\",\r\n            duration: 3000\r\n          });\r\n          isValidate = false\r\n          break;\r\n        }\r\n      }\r\n      if (isValidate) {\r\n        this.axios.createVisit(this.form).then(({ data }) => {\r\n          if (data.success) {\r\n            // this.$store.dispatch({\r\n            //   type: 'BaseInfo',\r\n            //   form: data.data,\r\n            //   area: this.area\r\n            // })\r\n            this.$toast({\r\n              message: '录入成功',\r\n              position: 'model',\r\n              duration: 3000\r\n            })\r\n            this.$router.push({\r\n              name: 'visitRecord',\r\n              query: {id: this.id}\r\n            })\r\n          }\r\n          if (!data.success) {\r\n            this.$toast({\r\n              message: data.msg,\r\n              position: 'model',\r\n              duration: 3000\r\n            })\r\n          }\r\n        }).catch(error => {\r\n          console.log(error)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/visitRecord/createVisit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('mt-header',{attrs:{\"title\":\"录入拜访\"}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":{ path:'/detailNotEnter/'+_vm.id }},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"}},[_vm._v(\"返回\")])],1)],1),_vm._v(\" \"),_c('mt-field',{attrs:{\"readonly\":true,\"disableClear\":true,\"label\":\"商户名称\",\"placeholder\":\"请输入拜访商户名称\"},model:{value:(_vm.form.shopName),callback:function ($$v) {_vm.$set(_vm.form, \"shopName\", $$v)},expression:\"form.shopName\"}}),_vm._v(\" \"),_c('selectList',{attrs:{\"title\":\"业务线\",\"type\":\"line\",\"disabled\":_vm.isDisable},on:{\"select\":_vm.getValue},nativeOn:{\"click\":function($event){return _vm.regShop($event)}}}),_vm._v(\" \"),_c('selectList',{attrs:{\"title\":\"行业\",\"type\":\"category\",\"disabled\":_vm.isDisable},on:{\"select\":_vm.getValue},nativeOn:{\"click\":function($event){return _vm.regShop($event)}}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"联系人\"},model:{value:(_vm.form.userName),callback:function ($$v) {_vm.$set(_vm.form, \"userName\", $$v)},expression:\"form.userName\"}}),_vm._v(\" \"),_c('selectList',{attrs:{\"title\":\"跟进方式\",\"val\":_vm.form.followWay==2?'拜访':'',\"type\":\"follow\"},model:{value:(_vm.form.followWay),callback:function ($$v) {_vm.$set(_vm.form, \"followWay\", $$v)},expression:\"form.followWay\"}}),_vm._v(\" \"),_c('selectList',{attrs:{\"title\":\"跟进日期\",\"type\":\"date\"},model:{value:(_vm.form.followDate),callback:function ($$v) {_vm.$set(_vm.form, \"followDate\", $$v)},expression:\"form.followDate\"}}),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"跟进内容\",\"onKeypress\":\"javascript:if(event.keyCode == 32)event.returnValue = false;\",\"attr\":{maxlength: 100},\"placeholder\":\"请录入内容\",\"type\":\"textarea\",\"rows\":\"2\"},model:{value:(_vm.form.followContent),callback:function ($$v) {_vm.$set(_vm.form, \"followContent\", $$v)},expression:\"form.followContent\"}}),_vm._v(\" \"),_c('div',{staticClass:\"btnl\"},[_c('mt-button',{attrs:{\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-2f35988c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/visitRecord/createVisit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f35988c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"F:\\\\\\\\bdcrm\\\\\\\\vue-h5\\\\\\\\src\\\\\\\\css\\\\\\\\index.scss\\\"]}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./createVisit.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./createVisit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./createVisit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2f35988c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./createVisit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2f35988c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/visitRecord/createVisit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
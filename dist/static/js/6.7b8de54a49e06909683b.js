webpackJsonp([6],{"1RJS":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("aA9S"),o=a.n(s),n={name:"businessCenter",created:function(){this.getData()},data:function(){return{options1:[{name:"全部",code:""},{name:"商城",code:"1"},{name:"新零售",code:"2"}],options2:[{name:"全部",code:""},{name:" 未签约",code:0},{name:"签约中",code:1},{name:"入驻审批",code:2},{name:"入驻中",code:3},{name:"修改审批",code:4},{name:"冻结中",code:5},{name:"过期",code:6},{name:"失败",code:-1}],form:{busLineld:"shangcheng",crmState:"",crmStateList:[3,4,5],customName:"",from:"bdcrm",page:1,rows:10,token:this.$store.state.token},popupVisible:!1,searchItems:[],loading:!0,selected:"1",allLoaded:!1,allLoaded2:!1,allLoaded3:!1,allLoaded4:!1,items:[],items2:[],items3:[],pageIndex:"",pageIndex2:"",pageIndex3:"",pageIndex4:"",pageCount:"",pageCount2:"",pageCount3:"",pageCount4:"",flag:!1,flag2:!1}},methods:{sortState:function(t,e,a,s){return t.sort(function(t,o){var n,i;switch(String(t[e])){case"2":n=1;break;case"-1":n=2;break;case"1":n=3;break;case"0":n=4;break;case"4":n=5;break;case"3":n=6;break;case"5":n=7}switch(String(o[e])){case"2":i=1;break;case"-1":i=2;break;case"1":i=3;break;case"0":i=4;break;case"4":i=5;break;case"3":i=6;break;case"5":i=7}return n<i?-1:n>i?1:s?o[a]<t[a]?1:-1:o[a]<t[a]?-1:1}),t},search:function(){var t=this,e=o()(this.form,{crmStateList:[-1,0,1,2,3,4,5,6],rows:"",page:""});this.axios.customList(e).then(function(e){var a=e.data;a.success&&t.$set(t,"searchItems",a.data.list),a.success||t.$toast({message:a.msg,position:"model",duration:3e3})}).catch(function(t){console.log(t)})},getCusData:function(){var t=this;this.axios.customList(this.form).then(function(e){var a=e.data;a.success&&(t.pageIndex2=a.data.pageIndex,t.pageCount2=a.data.pageCount,(a.data.pageCount===a.data.pageIndex||0==a.data.rowsCount)&&(t.allLoaded2=!0),t.$set(t,"items2",t.items2.concat(t.sortState(a.data.list,"crmState","createDate"))),t.loading=!1),a.success||t.$toast({message:a.msg,position:"model",duration:3e3})}).catch(function(t){console.log(t)})},getData:function(){var t=this;this.axios.busList(this.form).then(function(e){var a=e.data;a.success&&("1"!==t.selected||t.popupVisible?"2"!==t.selected||t.popupVisible?"3"!==t.selected||t.popupVisible?t.popupVisible&&(t.pageIndex4=a.data.pageIndex,t.pageCount4=a.data.pageCount,(a.data.pageCount===a.data.pageIndex||0==a.data.rowsCount)&&(t.allLoaded4=!0),t.$set(t,"items3",t.searchItems.concat(t.util.sortDate(a.data.list,"contractEndTime")))):(t.pageIndex3=a.data.pageIndex,t.pageCount3=a.data.pageCount,(a.data.pageCount===a.data.pageIndex||0==a.data.rowsCount)&&(t.allLoaded3=!0),t.$set(t,"items3",t.items3.concat(t.util.sortDate(a.data.list,"contractEndTime")))):(t.pageIndex2=a.data.pageIndex,t.pageCount2=a.data.pageCount,(a.data.pageCount===a.data.pageIndex||0==a.data.rowsCount)&&(t.allLoaded2=!0),t.$set(t,"items2",t.items2.concat(t.sortState(a.data.list,"crmState","createDate",!1)))):(t.pageIndex=a.data.pageIndex,t.pageCount=a.data.pageIndex,(a.data.pageCount===a.data.pageIndex||0==a.data.rowsCount)&&(t.allLoaded=!0),t.$set(t,"items",t.items.concat(t.sortState(a.data.list,"crmState","createDate",!0)))),t.loading=!1),a.success||t.$toast({message:a.msg,position:"model",duration:3e3})}).catch(function(t){console.log(t)})},getDetail:function(t,e,a){a&&this.$store.dispatch({type:"VersionId",versionId:a}),-1!==[-1,0,1,2].indexOf(t)?1===this.$store.state.user.roleLevel&&this.$router.push({path:"/detailNotEnter/"+e}):-1!==[3,4,5,6].indexOf(t)&&this.$router.push({path:"/detailEnter/"+e})},request:function(){"1"!==this.selected||this.popupVisible?"2"!==this.selected||this.popupVisible?"3"!==this.selected||this.popupVisible?this.popupVisible&&(this.pageIndex4===this.pageCount4?this.allLoaded4=!0:(this.form.page=++this.pageIndex4,this.getData())):this.pageIndex3===this.pageCount3?this.allLoaded3=!0:(this.form.page=++this.pageIndex3,this.getData()):this.pageIndex2===this.pageCount2?this.allLoaded2=!0:(this.form.page=++this.pageIndex2,this.getCusData()):this.pageIndex===this.pageCount?this.allLoaded=!0:(this.form.page=++this.pageIndex,this.getData())}},watch:{selected:function(t,e){"1"===t?(this.form.crmState="",this.form.crmStateList=[3,4,5]):"2"!==t||this.flag?"3"!==t||this.flag2||(this.flag2=!0,this.form.crmStateList=[6],this.form.crmState="6",this.getData()):(this.form.crmState="",this.flag=!0,this.form.crmStateList=[-1,0,1,2],this.getCusData())}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?t._e():a("div",{},[a("mt-header",{attrs:{title:"商户管理"}},[a("router-link",{attrs:{slot:"left",to:"/home"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1),t._v(" "),a("mt-button",{attrs:{slot:"right",icon:"search"},on:{click:function(e){t.popupVisible=!0}},slot:"right"})],1),t._v(" "),a("mt-popup",{staticClass:"search",attrs:{position:"right"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[a("mt-search",{attrs:{show:!0,result:t.searchItems},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.form.customName,callback:function(e){t.$set(t.form,"customName",e)},expression:"form.customName"}},[a("div",{staticClass:"filterCon ms"},[a("div",{ref:"button",staticClass:"item"},[a("span",[t._v("业务线")]),t._v(" "),a("span",[t._v("▼")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.busLineId,expression:"form.busLineId"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"busLineId",e.target.multiple?a:a[0])},t.search]}},t._l(t.options1,function(e,s){return a("option",{key:s,domProps:{value:e.code,textContent:t._s(e.name)}})}))]),t._v(" "),a("div",{ref:"button2",staticClass:"item"},[a("span",[t._v("商户状态")]),t._v(" "),a("span",[t._v("▼")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.crmState,expression:"form.crmState"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"crmState",e.target.multiple?a:a[0])},t.search]}},t._l(t.options2,function(e,s){return a("option",{key:s,domProps:{value:e.code,textContent:t._s(e.name)}})}))])]),t._v(" "),!t.loading&&t.popupVisible?a("pullup",{attrs:{allLoaded:t.allLoaded4},on:{request:t.request}},t._l(t.searchItems,function(e,s){return a("cardbus",{key:s,attrs:{data:e},nativeOn:{click:function(a){t.getDetail(e.crmState,e.customId,e.versionId)}}})})):t._e(),t._v(" "),0===t.searchItems.length?a("div",{staticClass:"error"},[a("mt-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){t.popupVisible=!1}}},[t._v("返回")])],1):t._e()],1)],1),t._v(" "),a("mt-navbar",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"1"}},[t._v("入驻商户")]),t._v(" "),a("mt-tab-item",{attrs:{id:"2"}},[t._v("未入驻商户")]),t._v(" "),a("mt-tab-item",{attrs:{id:"3"}},[t._v("到期商户")])],1),t._v(" "),a("mt-tab-container",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"1"}},[t.loading||"1"!==t.selected||t.popupVisible?t._e():a("pullup",{attrs:{allLoaded:t.allLoaded},on:{request:t.request}},t._l(t.items,function(e,s){return a("cardbus",{key:s,attrs:{data:e},nativeOn:{click:function(a){t.getDetail(e.crmState,e.customId,e.versionId)}}})}))],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"2"}},["2"!==t.selected||t.popupVisible?t._e():a("pullup",{attrs:{allLoaded:t.allLoaded2},on:{request:t.request}},t._l(t.items2,function(e,s){return a("cardbus",{key:s,attrs:{data:e},nativeOn:{click:function(a){t.getDetail(e.crmState,e.customId,e.versionId)}}})}))],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"3"}},["3"!==t.selected||t.popupVisible?t._e():a("pullup",{attrs:{allLoaded:t.allLoaded3},on:{request:t.request}},t._l(t.items3,function(e,s){return a("cardbus",{key:s,attrs:{data:e},nativeOn:{click:function(a){t.getDetail(e.crmState,e.customId,e.versionId)}}})}))],1)],1)],1)},staticRenderFns:[]};var r=a("vSla")(n,i,!1,function(t){a("dqqG")},"data-v-9ec6d7b4",null);e.default=r.exports},dqqG:function(t,e){}});
//# sourceMappingURL=6.7b8de54a49e06909683b.js.map
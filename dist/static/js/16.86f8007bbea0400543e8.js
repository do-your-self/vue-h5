webpackJsonp([16],{"3i8b":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"",props:{id:String},data:function(){return{isDisable:!1,form:{busLineId:"1",busLineName:"",categoryId:"1",categoryName:"",customId:this.id,followContent:"",followDate:"",followWay:2,from:"bdcrm",shopName:this.$route.query.shopName,token:this.$store.state.token,userId:this.$store.state.user.userId,userName:this.$store.state.user.userName}}},methods:{regShop:function(){this.isDisable&&this.$toast({message:"请先输入商户名称",position:"model",duration:3e3})},getValue:function(e,t){switch(t){case"category":this.form.categoryName=e[0].name,this.form.categoryId=e[0].code;break;case"line":this.form.busLineName=e[0].name,this.form.busLineId=e[0].code}},submit:function(){for(var e=this,t=[{value:this.form.shopName,required:!0,message:"商户名称不能为空"},{value:this.form.busLineName,required:!0,message:"业务线不能为空"},{value:this.form.categoryName,required:!0,message:"行业不能为空"},{value:this.form.userName,required:!0,message:"联系人不能为空"},{value:this.form.followWay,required:!0,message:"跟进方式不能为空"},{value:this.form.followDate,required:!0,message:"跟进日期不能为空"},{value:this.form.followContent,required:!0,message:"跟进内容不能为空",regExp:/^.{2,50}$/,errorMsg:"跟进内容长度大于等于2，小于等于50"}],o=!0,s=0;s<t.length;s++){if(!t[s].value&&t[s].required){this.$toast({message:t[s].message,position:"model",duration:3e3}),o=!1;break}if((t[s].regExp&&t[s].required||t[s].value&&!t[s].required)&&!t[s].regExp.test(t[s].value)){this.$toast({message:t[s].errorMsg,position:"model",duration:3e3}),o=!1;break}if(5==s&&!(Date.parse(t[s].value)<=Date.parse(new Date))){this.$toast({message:"跟进日期不能大于当前时间",position:"model",duration:3e3}),o=!1;break}}o&&this.axios.createVisit(this.form).then(function(t){var o=t.data;o.success&&(e.$toast({message:"录入成功",position:"model",duration:3e3}),e.$router.push({name:"visitRecord",query:{id:e.id}})),o.success||e.$toast({message:o.msg,position:"model",duration:3e3})}).catch(function(e){console.log(e)})}}},a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("mt-header",{attrs:{title:"录入拜访"}},[o("router-link",{attrs:{slot:"left",to:{path:"/detailNotEnter/"+e.id}},slot:"left"},[o("mt-button",{attrs:{icon:"back"}},[e._v("返回")])],1)],1),e._v(" "),o("mt-field",{attrs:{readonly:!0,disableClear:!0,label:"商户名称",placeholder:"请输入拜访商户名称"},model:{value:e.form.shopName,callback:function(t){e.$set(e.form,"shopName",t)},expression:"form.shopName"}}),e._v(" "),o("selectList",{attrs:{title:"业务线",type:"line",disabled:e.isDisable},on:{select:e.getValue},nativeOn:{click:function(t){return e.regShop(t)}}}),e._v(" "),o("selectList",{attrs:{title:"行业",type:"category",disabled:e.isDisable},on:{select:e.getValue},nativeOn:{click:function(t){return e.regShop(t)}}}),e._v(" "),o("mt-field",{attrs:{label:"联系人"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}}),e._v(" "),o("selectList",{attrs:{title:"跟进方式",val:2==e.form.followWay?"拜访":"",type:"follow"},model:{value:e.form.followWay,callback:function(t){e.$set(e.form,"followWay",t)},expression:"form.followWay"}}),e._v(" "),o("selectList",{attrs:{title:"跟进日期",type:"date"},model:{value:e.form.followDate,callback:function(t){e.$set(e.form,"followDate",t)},expression:"form.followDate"}}),e._v(" "),o("mt-field",{attrs:{label:"跟进内容",onKeypress:"javascript:if(event.keyCode == 32)event.returnValue = false;",attr:{maxlength:100},placeholder:"请录入内容",type:"textarea",rows:"2"},model:{value:e.form.followContent,callback:function(t){e.$set(e.form,"followContent",t)},expression:"form.followContent"}}),e._v(" "),o("div",{staticClass:"btnl"},[o("mt-button",{attrs:{size:"large",type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var r=o("vSla")(s,a,!1,function(e){o("4nw0")},"data-v-2f35988c",null);t.default=r.exports},"4nw0":function(e,t){}});
//# sourceMappingURL=16.86f8007bbea0400543e8.js.map